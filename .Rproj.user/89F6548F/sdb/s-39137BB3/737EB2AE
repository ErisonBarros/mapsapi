{
    "collab_server" : "",
    "contents" : "#' @import bitops\n\ndecode_line = function(encoded){\n\n  vlen = nchar(encoded)\n  vindex = 0\n  varray = NULL\n  vlat = 0\n  vlng = 0\n\n  while(vindex < vlen) {\n    vb = NULL\n    vshift = 0\n    vresult = 0\n    repeat{\n      if(vindex + 1 <= vlen) {\n        vindex = vindex + 1\n        vb = as.integer(charToRaw(substr(encoded, vindex, vindex))) - 63\n      }\n\n      vresult = bitOr(vresult, bitShiftL(bitAnd(vb, 31), vshift))\n      vshift = vshift + 5\n      if(vb < 32) break\n    }\n\n    dlat = ifelse(\n      bitAnd(vresult, 1),\n      -(bitShiftR(vresult, 1) + 1),\n      bitShiftR(vresult, 1)\n    )\n    vlat = vlat + dlat\n\n    vshift = 0\n    vresult = 0\n    repeat{\n      if(vindex + 1 <= vlen) {\n        vindex = vindex + 1\n        vb = as.integer(charToRaw(substr(encoded, vindex, vindex))) - 63\n      }\n\n      vresult = bitOr(vresult, bitShiftL(bitAnd(vb, 31), vshift))\n      vshift = vshift + 5\n      if(vb < 32) break\n    }\n\n    dlng = ifelse(\n      bitAnd(vresult, 1),\n      -(bitShiftR(vresult, 1) + 1),\n      bitShiftR(vresult, 1)\n    )\n    vlng = vlng + dlng\n\n    varray = rbind(varray, c(vlng * 1e-5, vlat * 1e-5))\n  }\n  colnames(varray) = c(\"lon\", \"lat\")\n  varray\n}\n\n",
    "created" : 1506063833948.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3511120281",
    "id" : "737EB2AE",
    "lastKnownWriteTime" : 1506066510,
    "last_content_update" : 1506066510863,
    "path" : "~/Dropbox/Packages/mapsapi/R/decode_line.R",
    "project_path" : "R/decode_line.R",
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}